<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reader Feedback Variants</title>
  <!-- deploy bump 14 -->
  <style>
    :root { color-scheme: light; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f8f9fa; color: #202122; }
    /* Split layout: tabs on the left, content takes the rest */
    .page { display: flex; min-height: 100vh; }
    .sidebar { width: 230px; padding: 16px 12px; border-right: 1px solid #eaecf0; background: #fff; }
    .stage { flex: 1; min-width: 0; }

    /* Minimal vertical tab list */
    .tablist { display: flex; flex-direction: column; gap: 4px; }
    .tab {
      appearance: none;
      text-align: left;
      border: 1px solid transparent;
      background: transparent;
      border-radius: 6px;
      padding: 8px 10px;
      font-size: 0.95rem;
      cursor: pointer;
      color: #54595d;
      transition: background 0.15s ease, color 0.15s ease;
    }
    .tab:hover { background: #f8f9fa; color: #202122; }
    .tab[aria-selected="true"] { color: #202122; font-weight: 600; background: #f3f4f5; }
    .tab:focus-visible { outline: 2px solid #36c; outline-offset: 2px; }

    /* Sidebar grouping */
    .sidebar-group { margin-bottom: 10px; }
    .sidebar-label { font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: .04em; margin: 0 0 6px 2px; }
    .sidebar-separator { border-top: 1px solid #eaecf0; margin: 12px 0; }

    /* Full-bleed stage; no border box */
    .stage-inner { height: 100vh; }
    .variant-frame { width: 100%; height: 100%; border: 0; display: none; background: #fff; }
    .variant-frame.active { display: block; }

    @media (max-width: 768px) {
      .page { display: block; }
      .sidebar { width: auto; border-right: 0; border-bottom: 1px solid #eaecf0; padding: 8px 8px 6px; position: sticky; top: 0; z-index: 1; background: #fff; }
    .tablist { flex-direction: row; gap: 6px; flex-wrap: wrap; }
    .tab { text-align: center; padding: 8px 10px; }
    .stage-inner { height: 82vh; }
    }
  </style>
  <script>
    // Basic JS to toggle frames and lazy-load non-active ones
    window.addEventListener('DOMContentLoaded', () => {
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const frames = new Map(Array.from(document.querySelectorAll('.variant-frame')).map(f => [f.id.replace('panel-', ''), f]));
      const labels = {
        master: 'Heading Menu',
        'whisper-modal': 'Dialog Panel',
        'whisper-inline': 'Inline Prompt',
        'whisper-sidebar': 'Sidebar Prompt'
      };
      function activate(target) {
        tabs.forEach(t => t.setAttribute('aria-selected', String(t.dataset.target === target)));
        frames.forEach((frame, key) => {
          const isActive = key === target; frame.classList.toggle('active', isActive);
          if (isActive && frame.dataset.src && !frame.dataset.loaded) { frame.src = frame.dataset.src; frame.dataset.loaded = 'true'; }
        });
        // No footer/meta text
      }
      tabs.forEach(tab => {
        tab.addEventListener('click', () => activate(tab.dataset.target));
        tab.addEventListener('keydown', (e) => {
          if (e.key !== 'ArrowRight' && e.key !== 'ArrowLeft') return;
          e.preventDefault();
          const i = tabs.indexOf(tab); const next = tabs[(i + (e.key === 'ArrowRight' ? 1 : -1) + tabs.length) % tabs.length];
          next.focus(); activate(next.dataset.target);
        });
      });
      activate('master');
    });
  </script>
</head>
<body>
  <div class="page">
    <aside class="sidebar">
      <div class="sidebar-group">
        <div class="sidebar-label">Improve Existing Sections</div>
        <div class="tablist" role="tablist" aria-label="Section feedback">
          <button class="tab" role="tab" id="tab-master" data-target="master" aria-controls="panel-master" aria-selected="true" title="Tap the section’s … menu to give feedback">Ask on Section</button>
          <button class="tab" role="tab" id="tab-modal" data-target="whisper-modal" aria-controls="panel-whisper-modal" aria-selected="false" title="Open a small pop‑up to choose feedback options">Pop‑up Panel</button>
          <button class="tab" role="tab" id="tab-inline" data-target="whisper-inline" aria-controls="panel-whisper-inline" aria-selected="false" title="Prompt appears inline near what you’re reading">Inline Suggestion</button>
        </div>
      </div>
      <div class="sidebar-separator" role="separator" aria-orientation="horizontal"></div>
      <div class="sidebar-group">
        <div class="sidebar-label">Suggest Missing Topics</div>
        <div class="tablist" role="tablist" aria-label="Stub suggestions">
          <button class="tab" role="tab" id="tab-sidebar" data-target="whisper-sidebar" aria-controls="panel-whisper-sidebar" aria-selected="false" title="Suggest topics to add when an article is a stub">Suggest Topics</button>
        </div>
      </div>
    </aside>
    <main class="stage">
      <div class="stage-inner">
        <iframe class="variant-frame active" id="panel-master" title="Baseline" src="variants/master/index.html?embed=1" loading="lazy"></iframe>
        <iframe class="variant-frame" id="panel-whisper-modal" title="Whisper modal" data-src="variants/whisper-modal/index.html?embed=1" loading="lazy"></iframe>
        <iframe class="variant-frame" id="panel-whisper-inline" title="Whisper inline" data-src="variants/whisper-inline/index.html?embed=1" loading="lazy"></iframe>
        <iframe class="variant-frame" id="panel-whisper-sidebar" title="Whisper sidebar" data-src="variants/whisper-sidebar/index.html?embed=1" loading="lazy"></iframe>
      </div>
    </main>
    
  </div>
</body>
</html>
