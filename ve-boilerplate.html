<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>VE Boilerplate — Wikipedia‑style Visual Editor</title>

  <!-- Codex tokens + CSS (design system) -->
  <link rel="stylesheet" href="https://unpkg.com/@wikimedia/codex@2.3.0/dist/codex.style.css">
  <link rel="stylesheet" href="https://unpkg.com/@wikimedia/codex-design-tokens@2.3.0/theme-wikimedia-ui.css">

  <!-- Local styles (minimal) -->
  <link rel="stylesheet" href="reading-styles.css">
  </head>
<body>

  <!-- Embed mode: when loaded in comparison page, hide header chrome -->
  <script>
    (function(){
      try {
        var params = new URLSearchParams(location.search);
        if (params.get('embed') === '1' || window.top !== window.self) {
          document.documentElement.classList.add('embed');
          document.addEventListener('DOMContentLoaded', function(){
            document.body.classList.add('embed');
          });
        }
      } catch(e) {}
    })();
  </script>

  <!-- Header + Tabs (Reading mode) -->
  <header class="container page-header" role="banner">
    <h1 class="firstHeading">Sample Topic</h1>
    <div class="page-tabs-wrapper">
      <nav class="ns-tabs" aria-label="Namespace tabs">
        <button class="ns-tab active">Article</button>
        <button class="ns-tab">Talk</button>
      </nav>
      <nav class="page-actions" aria-label="Page actions">
        <button class="action-tab active">
          <span class="action-tab-text">Read</span>
          <span class="action-tab-icon cdx-icon" data-icon="cdxIconArticle"></span>
        </button>
        <button class="action-tab" id="editTab">
          <span class="action-tab-text">Edit</span>
          <span class="action-tab-icon cdx-icon" data-icon="cdxIconEdit"></span>
        </button>
        <button class="action-tab">
          <span class="action-tab-text">View history</span>
          <span class="action-tab-icon cdx-icon" data-icon="cdxIconHistory"></span>
        </button>
         <button class="action-tab star">
           <span class="action-tab-text">⭐</span>
           <span class="action-tab-icon cdx-icon" data-icon="cdxIconStar"></span>
         </button>
      </nav>
    </div>
  </header>

  <!-- Reading Mode Content -->
  <main class="content-wrap" id="readingContent">
    <p class="tagline">From Wikipedia, the free encyclopedia</p>
    <div class="article-layout">
      <aside class="toc-sidebar" id="tocSidebar" aria-label="Contents">
        <div class="toc-title">Contents</div>
        <nav id="toc" class="toc"></nav>
      </aside>
      <article class="article-content" id="articleBody"></article>
    </div>

    <!-- Whisper Chips UI: selection popover (hidden by default) -->
    <div id="whisperSelectionPopover" class="whisper-popover" role="dialog" aria-label="Need more options" style="display:none;">
      <button class="btn-popover" id="whisperNeedMoreBtn">Need more?</button>
    </div>

    <!-- Whisper Chips UI: bottom sheet (hidden by default) -->
    <div id="whisperSheetBackdrop" class="whisper-backdrop" style="display:none;"></div>
    <div id="whisperSheet" class="whisper-sheet" role="dialog" aria-modal="true" aria-labelledby="whisperSheetTitle" style="display:none;">
      <div class="whisper-sheet__header">
        <div class="whisper-sheet__title" id="whisperSheetTitle">Ask for more</div>
        <button class="whisper-sheet__close" id="whisperSheetClose" aria-label="Close">×</button>
      </div>
      <div class="whisper-sheet__sub" id="whisperSheetSub">On this section</div>
      <div id="whisperQuote" class="whisper-quote" style="display:none;"></div>
      <div class="whisper-helper">Pick what would help most. You can add a note.</div>

      <div class="whisper-options" id="whisperOptions" role="group" aria-label="What would help?">
        <label class="whisper-option"><input type="checkbox" id="optMoreDetails"> I want more details in this section</label>
        <label class="whisper-option"><input type="checkbox" id="optMoreImages"> I want pictures in this section</label>
      </div>

      <div class="whisper-note" id="whisperNoteBlock">
        <label for="whisperNoteInput" class="whisper-note__label">Note (≤140)</label>
        <textarea id="whisperNoteInput" class="whisper-note__input" maxlength="140" rows="3" placeholder="Type a short note…"></textarea>
        <div class="whisper-note__meta"><span id="whisperCharCount">0/140</span></div>
      </div>

      <div class="whisper-actions">
        <span class="whisper-actions__left"></span>
        <button id="whisperSubmit" class="whisper-submit" disabled>Submit</button>
      </div>
    </div>

     <!-- Feedback Toast -->
     <div id="whisperToast" class="whisper-toast" role="status" aria-live="polite" style="display:none;">Signal sent to editors. Thanks!</div>
     <div id="variantBadge" class="variant-badge" style="display:none;"></div>
   </main>

  <!-- Visual Editor Interface (hidden by default) -->
  <div class="ve-interface" id="veInterface" style="display: none;">

    <!-- Duplicate Header for VE mode -->
    <header class="container page-header" role="banner">
      <h1 class="firstHeading">Sample Topic</h1>
      <div class="page-tabs-wrapper">
        <nav class="ns-tabs" aria-label="Namespace tabs">
          <button class="ns-tab active">Article</button>
          <button class="ns-tab">Talk</button>
        </nav>
        <nav class="page-actions" aria-label="Page actions">
          <button class="action-tab">Read</button>
          <button class="action-tab active" id="editTabVE">Edit</button>
          <button class="action-tab">View history</button>
          <button class="action-tab star">⭐</button>
        </nav>
      </div>
    </header>

    <!-- VE toolbar strip -->
    <div class="ve-strip" role="region" aria-label="Editing toolbar">
      <div class="ve-bar">

        <!-- Mobile toolbar -->
        <div class="mobile-toolbar">
          <button class="btn" id="close" title="Close"><span class="cdx-icon" data-icon="cdxIconClose"></span></button>
          <button class="btn" id="undo" title="Undo"><span class="cdx-icon" data-icon="cdxIconUndo"></span></button>

          <div class="dropdown" id="dd-style-mobile">
            <span class="cdx-icon" data-icon="cdxIconTextStyle"></span>
            <span class="caret" aria-hidden="true"></span>
            <div class="menu" id="menu-style-mobile">
              <button data-style="bold">Bold</button>
              <button data-style="italic">Italic</button>
              <button data-style="underline">Underline</button>
              <button data-style="strike">Strikethrough</button>
              <button data-style="script-sup">Superscript</button>
              <button data-style="script-sub">Subscript</button>
              <button data-style="clean">Clear styling</button>
            </div>
          </div>

          <button class="btn" id="quote" title="Quote"><span class="cdx-icon" data-icon="cdxIconQuotes"></span></button>
          <button class="btn" id="btn-link-mobile" title="Add link"><span class="cdx-icon" data-icon="cdxIconLink"></span></button>

          <div class="dropdown" id="dd-edit-mobile">
            <span class="cdx-icon" data-icon="cdxIconEdit"></span>
            <span class="caret" aria-hidden="true"></span>
            <div class="menu" id="menu-edit-mobile">
              <button data-insert="image">Media…</button>
              <button data-insert="template">Template… (mock)</button>
              <button data-insert="math">Math… (mock)</button>
              <button data-insert="table">Table… (mock)</button>
            </div>
          </div>

          <button class="btn submit-btn" id="submit" title="Submit" style="margin-left:auto;"><span class="cdx-icon" data-icon="cdxIconNext"></span></button>
        </div>

        <!-- Desktop toolbar -->
        <div class="desktop-toolbar">
          <div class="group tight">
            <button class="btn" id="undo-desktop" title="Undo"><span class="cdx-icon" data-icon="cdxIconUndo"></span></button>
            <button class="btn" id="redo" title="Redo"><span class="cdx-icon" data-icon="cdxIconRedo"></span></button>
          </div>

          <div class="group">
            <div class="dropdown" id="dd-paragraph">
              <span class="cdx-icon" data-icon="cdxIconTextHeading"></span>
              <span class="cdx-button__label">Paragraph</span>
              <span class="caret" aria-hidden="true"></span>
              <div class="menu" id="menu-paragraph">
                <button data-header="">Paragraph</button>
                <button data-header="1">Heading 1</button>
                <button data-header="2">Heading 2</button>
                <button data-header="3">Heading 3</button>
                <button data-header="4">Heading 4</button>
                <button data-header="5">Heading 5</button>
                <button data-header="6">Heading 6</button>
                <button data-header="code">Preformatted</button>
              </div>
            </div>
          </div>

          <div class="group">
            <div class="dropdown" id="dd-style">
              <span class="cdx-icon" data-icon="cdxIconTextStyle"></span>
              <span class="cdx-button__label">A</span>
              <span class="caret" aria-hidden="true"></span>
              <div class="menu" id="menu-style">
                <button data-style="bold">Bold</button>
                <button data-style="italic">Italic</button>
                <button data-style="underline">Underline</button>
                <button data-style="strike">Strikethrough</button>
                <button data-style="script-sup">Superscript</button>
                <button data-style="script-sub">Subscript</button>
                <button data-style="clean">Clear styling</button>
              </div>
            </div>
          </div>

          <div class="group tight">
            <button class="btn" data-cmd="ol" title="Numbered list"><span class="cdx-icon" data-icon="cdxIconListNumbered"></span></button>
            <button class="btn" data-cmd="ul" title="Bullet list"><span class="cdx-icon" data-icon="cdxIconListBullet"></span></button>
          </div>

          <div class="group">
            <button class="btn" id="btn-link" title="Add link">
              <span class="cdx-icon" data-icon="cdxIconLink"></span>
              <span class="cdx-button__label">Link</span>
            </button>

            <div class="dropdown" id="dd-cite">
              <span class="cdx-icon" data-icon="cdxIconReference"></span>
              <span class="cdx-button__label">Cite</span>
              <span class="caret"></span>
              <div class="menu" id="menu-cite">
                <button data-cite="web">Cite web… (mock)</button>
                <button data-cite="book">Cite book… (mock)</button>
                <button data-cite="news">Cite news… (mock)</button>
              </div>
            </div>

            <div class="dropdown" id="dd-insert">
              <span class="cdx-icon" data-icon="cdxIconAdd"></span>
              <span class="cdx-button__label">Insert</span>
              <span class="caret"></span>
              <div class="menu" id="menu-insert">
                <button data-insert="image">Media…</button>
                <button data-insert="template">Template… (mock)</button>
                <button data-insert="math">Math… (mock)</button>
                <button data-insert="table">Table… (mock)</button>
                <button data-insert="char">Special character…</button>
              </div>
            </div>
          </div>

          <div class="group tight">
            <button class="btn" disabled title="Page options"><span class="cdx-icon" data-icon="cdxIconSettings"></span></button>
            <button class="btn" title="Help"><span class="cdx-icon" data-icon="cdxIconHelp"></span></button>
          </div>

          <div class="group" style="margin-left:auto;border-left:none;padding-right:0">
            <button class="btn publish-btn" id="publish" disabled>Publish</button>
          </div>
        </div>

      </div>
    </div>

    <!-- VE Content -->
    <main class="ve-content-wrap">
      <p class="tagline">From Wikipedia, the free encyclopedia</p>
      <div class="surface">
        <div id="editor"></div>
        <div class="status">
          <span>Changes are preview‑only in this demo.</span>
          <span class="badge">VE toolbar mock (Codex icons)</span>
        </div>
      </div>
    </main>

  </div>

  <!-- Sample article data (overrides default) -->
  <script>
    const articleData = {
      id: 'planet-mars',
      title: 'Mars',
      description: 'The fourth planet from the Sun',
      content: `'''Mars''' is the fourth planet from the Sun and the second-smallest planet in the [[Solar System]], being larger than only [[Mercury (planet)|Mercury]]. In English, Mars carries a name of the [[Mars (mythology)|Roman god of war]] and is often referred to as the "Red Planet". The latter refers to the effect of the iron oxide prevalent on Mars' surface, which gives it a reddish appearance.

== Physical characteristics ==
Mars is a [[terrestrial planet]] with a thin [[atmosphere]]. Its surface features impact craters, valleys, dunes, and [[polar ice cap]]s. Mars has two small and irregularly shaped [[natural satellite|moons]], [[Phobos (moon)|Phobos]] and [[Deimos (moon)|Deimos]], which may be captured asteroids.

=== Atmosphere ===
The atmosphere of Mars consists of about 95% [[carbon dioxide]], 3% [[nitrogen]], and 1.6% [[argon]]. Trace amounts of [[oxygen]] and [[water vapor]] are also present. Surface pressure is less than 1% of [[Earth]]'s.

=== Surface and geology ===
Mars hosts [[Olympus Mons]], the largest volcano and highest known mountain on any planet in the Solar System, and [[Valles Marineris]], one of the largest canyons. Much of the surface is covered by basaltic rock and iron-rich dust.

== Exploration ==
Humans have sent dozens of spacecraft to study Mars. Successful missions include orbiters and landers from [[NASA]], [[ESA]], [[Roscosmos]], [[ISRO]], and [[CNSA]]. Notable missions include:
* [[Viking program|Viking 1 and 2]] landers (1976)
* [[Mars Pathfinder]] and the [[Sojourner (rover)|Sojourner]] rover (1997)
* [[Mars Exploration Rover|Spirit and Opportunity]] (2004)
* [[Mars Science Laboratory|Curiosity]] (2012)
* [[Mars 2020|Perseverance]] and [[Ingenuity (helicopter)|Ingenuity]] (2021)

== Habitability and life ==
Evidence indicates that Mars once had liquid water on its surface. Present-day conditions are cold and arid, but subsurface ice and occasional brines exist. Numerous missions seek [[biosignature]]s or [[organic compound]]s that might indicate past life.

== Human missions ==
Proposals for crewed missions to Mars date back decades. Challenges include long-duration spaceflight, radiation exposure, entry-descent-landing in thin atmosphere, and in-situ resource utilization (ISRU) for fuel and life support.

== See also ==
* [[Terraforming of Mars]]
* [[Colonization of Mars]]
* [[Astrobiology]]

== References ==`
    };
  </script>

  <!-- Scripts -->
  <script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
  <script src="reading-script.js"></script>
</body>
</html>
